<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shadow</title>

  <!-- Meta Tags-->
  <meta name="title" content="ShadowV3" />
  <meta name="description" content="Tabbed, Multi-Featured, and Advanced. Quiet, Fast, Hidden." />
  <meta name="theme-color" content="#141433">



  <!-- Stylesheets -->
  <link rel="stylesheet" href="/css/index.css" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  <link rel="stylesheet" href="/css/themes.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Open+Sans:wght@400;700&display=swap" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet" />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <script src="/assets/settings.js"></script>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("/sw.js", {
          scope: "/",
        });
      });
    }
  </script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-NCTSG4T1B6"></script>
  <script>window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-NCTSG4T1B6');</script>
<script type='text/javascript' src='//pl23231560.cpmrevenuegate.com/43/28/e5/4328e5906625dfebca3d9c34182fd950.js'></script>
</head>

<body>
  <!-- Loading Screen -->
  <div id="loading-screen">
    <div class="dot-container">
      <i class="loading-dots"><i class="fa-solid fa-circle"></i></i>
      <i class="loading-dots"><i class="fa-solid fa-circle"></i></i>
      <i class="loading-dots"><i class="fa-solid fa-circle"></i></i>
    </div>
    <p class="loading-text">Loading Shadow Browser</p>
  </div>

  <!-- Tabs Container -->
  <div id="tabs-container">
    <button onclick="tabs.createTab();" id="add-tab" class="addtab-btn" style="vertical-align: text-bottom">
      <span class="material-symbols-outlined">add</span>
    </button>
  </div>

  <!-- Header -->
  <div id="header">
    <button id="back-button" class="control-button" style="margin-left: 5px" onclick="tabs.backward()">
      <span class="material-symbols-outlined">arrow_back</span>
    </button>
    <button id="forward-button" class="control-button" onclick="tabs.forward()">
      <span class="material-symbols-outlined">arrow_forward</span>
    </button>
    <button id="refresh-button" class="control-button">
      <span class="material-symbols-outlined" onclick="tabs.refresh()">refresh</span>
    </button>

    <form id="uv-form" class="inputcontainermain">
      <input type="text" id="search-bar" placeholder="Search or enter a URL" autocomplete="off" />
      <input id="uv-search-engine" value="https://www.google.com/search?q=%s" type="hidden" />
    </form>
    <div id="menu-button" class="menu-button" style="margin-left: 7px">
      <span class="material-symbols-outlined">more_vert</span>
    </div>
  </div>

  <!-- Dropdown Menu -->
  <div id="menu-dropdown" class="dropdown-content" style="display: none">
    <table>
      <tr>
        <td id="new-tab" onclick='tabs.createTab("shadow:/\/new");'>
          <button data-add-tab><i class="fas fa-plus"></i> New tab</button>
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <button data-add-tab onclick="bookmarksManager.newBookmark()">
            <i class="fas fa-plus"></i> Add Bookmark
          </button>
        </td>
      </tr>
    </table>
    <div class="separator"></div>
    <table>
      <tr>
        <td>
          <button data-add-tab onclick='tabs.createTab("shadow:/\/settings")'>
            <i class="fas fa-cog"></i> Settings
          </button>
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <button data-add-tab onclick='tabs.createTab("shadow:/\/games")'>
            <i class="fa-solid fa-play"></i> Games
          </button>
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <button data-add-tab onclick='alert("Coming in Shadow 3.1.0")'>
            <i class="fa-solid fa-comments"></i> Chat
          </button>
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <button data-add-tab onclick='tabs.createTab("discord.gg/goshadow")'>
            <i class="fa-brands fa-discord"></i> Discord
          </button>
        </td>
      </tr>
    </table>
    <div class="separator"></div>
    <table>
      <tr>
        <td>
          <button data-add-tab onclick="iframefullscreen()">
            <i class="fas fa-expand-arrows-alt"></i> Fullscreen
          </button>
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <button data-add-tab onclick="abtblank()">
            <i class="fas fa-sign-out-alt"></i> Open About:Blank
          </button>
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <button data-add-tab onclick="iframeabtblank()">
            <i class="fas fa-sign-out-alt"></i> Open Tab in Abt:Blank
          </button>
        </td>
      </tr>
    </table>
    <table>
      <tr>
        <td>
          <button data-add-tab onclick="exit()">
            <i class="fa-solid fa-circle-xmark"></i> Exit
          </button>
        </td>
      </tr>
    </table>
  </div>

  <!-- Bookmarks Container -->
  <div id="bookmarks-container"></div>
  <div class="context-menu" id="bookmark-context-menu" style="display: none">
    <div class="menu-item" onclick="editBookmark(`${title}`, `${url}`)">
      Edit
    </div>
    <div class="menu-item" onclick="deleteBookmark(`${title}`, `${url}`)">
      Delete
    </div>
  </div>
  <!-- Iframes Container -->
  <div id="iframes-container"></div>
  <div class="desc left-margin">
    <p id="uv-error"></p>
    <pre id="uv-error-code"></pre>
  </div>
  <!-- Dev extension warning -->
  <div class="extensions_disclaimer" style="display: none" id="dev-alert">
    <div class="extensions_disclaimer_content">
      <h2 style="color: var(--accent-color)">Warning</h2>
      <p id="dev-alert-text"></p>
      <div class="buttons">
        <button class="continue-button" onclick="devWarning(true)">
          Continue
        </button>
        <button class="cancel-button" onclick="devWarning(false)">
          Cancel
        </button>
      </div>
      <label for="remember-choice">
        <input type="checkbox" id="remember-choice" /> Remember Choice
      </label>
    </div>
  </div>
  <!--DEV STUFF-->
  <!-- <button class="powered-by-container" style="right:0; top:0;" onclick="reset()">Reset</button> -->
  <!--DEV STUFF-->
  <a id="billigerhost" class="powered-by-container" style="left: 0; bottom: 0" target="_blank">
    <img src="/icons/billigerhost.ico" alt="billigerhost Logo" />
    <span class="powered-by-text"><span style="color: #ad271f">Billiger</span>Host</span>
  </a>

  <a id="discord" class="discord" target="_blank">
    <i class="fa-brands fa-discord"></i>
  </a>
  <!-- Scripts -->
  <script src="/epoxy/index.js"></script>
  <script src="/bareTransport.js"></script>
  <script src="/baremux/bare.js"></script>
  <script src="/assets/search.js"></script>
  <script src="/assets/themes.js"></script>
  <script src="/assets/options.js"></script>
  <script src="/assets/search.js"></script>
  <script src="/uv/uv.bundle.js"></script>
  <script src="/uv/uv.config.js"></script>
  <script src="/uv/uv.sw.js"></script>
  <script src="/uv/uv.config.js"></script>
  <scirpt src="/assets/panic.js"></scirpt>
  <script src="/assets/tabs.js" async></script>
  <script src="/assets/bookmarks.js" async></script>
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("/sw.js", {
          scope: "/"
        });
      });
    }
  </script>
  <script>
    if (!localStorage.getItem("searchEngine")) {
      localStorage.setItem(
        "searchEngine",
        "https://www.google.com/search?q=%s",
      );
    }

    document.getElementById("uv-search-engine").value =
      localStorage.getItem("searchEngine");

    function updtSearchEngine(value) {
      document.getElementById("uv-search-engine").value = value;
    }

    window.addEventListener("storage", (event) => {
      if (event.key === "searchEngine") {
        updtSearchEngine(event.newValue);
      }
    });
  </script>
  <script>
    function reset() {
      localStorage.clear();
      navigator.serviceWorker.getRegistrations().then((registrations) => {
        for (const registration of registrations) {
          registration.unregister();
        }
      });
      location.reload();
    }

    function updateOmni() {
      tabs.updateOmni();
    }

    function setTab() {
      tabs.setTab();
    }

    function createTab(i) {
      tabs.createTab(i);
    }

    function load(i) {
      tabs.load(i);
    }

    function devAlert(i) {
      let message = `You have some extensions that are NOT from the store:\n`;
      i.forEach((a) => {
        message += `${a}\n`;
      });
      message +=
        "These could potentially be dangerous. Would you like to continue?";
      document.getElementById("dev-alert-text").innerText = message;
      document.getElementById("dev-alert").style.display = "block";
    }

    function devWarning(i) {
      if (i) {
        document.querySelector("iframe.active").contentWindow.devContinue();
      }
      document.getElementById("dev-alert").style.display = "none";
    }

    function updateMenu(i) {
      const menu = document.getElementById("menu-dropdown");
      const item = menu.children[0];
      const newElem = item.cloneNode();
      const a = newElem.children;
      a.innerHTML = `button data-add-tab onclick=\"${i.onclick}\"><i class=\"${i.iconClass}\"></i> ${i.label}</button>`;
      menu.appendChild(newElem);
    }
    const obj = {
      onclick: "",
      iconClass: "",
      label: "",
    };
    updateMenu(obj);

    const ua = navigator.userAgent;

    if (ua.includes("OPR") || ua.includes("Firefox")) {
      //Some features are unsupported (For example omnibox auto update omnibox)
      if (
        confirm(
          "You are using an unsupported browser. \nSome features may not work, would you like to enable the experimental support features?",
        )
      ) {
        showExpirmentalFeatures();
        if (
          confirm(
            "Would you like to remember this choice? You can always change this in settings.",
          )
        ) {
          localStorage.setItem("expirementalSupport", true);
        }
      } else {
        console.log("User doesn't want experimental support features");
      }
    } else {
      console.log("Using supported browser, continue");
    }
  </script>
  <script>
    window.addEventListener("load", function () {
      setTimeout(function () {
        const loadingScreen = document.getElementById("loading-screen");
        loadingScreen.style.display = "none";
      }, 750);
    });



    document.getElementById("search-bar").addEventListener("focus", (e) => {
      e.target.select();
    });
    onload = () => {
      parent.updateOmni();
      parent.setTab();
    };

    document.getElementById("billigerhost").onclick = (e) => {
      if (e.shiftKey) {
        parent.createTab("https://billing.billigerhost.com");
        setTimeout(updateOmni, 2500);
      } else {
        window.open("https://billing.billigerhost.com", "_blank");
      }
    };
  </script>
</body>

</html>